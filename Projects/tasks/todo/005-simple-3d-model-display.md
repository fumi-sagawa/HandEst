# タスク名: 簡易3Dモデル（関節球と円柱）の表示 - MVP Phase 1

## 概要
MediaPipeで取得した手の関節点データを基に、RealityKitを使用して関節を球体、骨を円柱で表現する簡易的な3Dモデルを表示する。段階的実装のPhase 1として位置づける。

## 背景・目的
- MVPとして早期に動作する3D表示の実現
- リアルな3Dモデル実装前の技術検証
- 基本的な3D操作機能の土台作り

## 優先度
**High** - MVPの中核機能として必須

## 前提条件
- #004（MediaPipe統合）が完了していること

## To-Be（完了条件）
- [ ] RealityKitのセットアップと基本実装
- [ ] RenderingFeatureの実装
- [ ] 関節点への球体配置（21個）
- [ ] 関節間の円柱による接続
- [ ] 手のひら部分の簡易メッシュ表示
- [ ] 3Dモデルの更新処理（30fps維持）
- [ ] 背景のカメラ映像処理（グレースケール＋ブラー）
- [ ] 座標系の適切な変換実装
- [ ] RealityKit初期化エラーの処理
- [ ] レンダリングエラーのハンドリング（Logger使用）
- [ ] メモリ不足時の対処
- [ ] RenderingFeatureの単体テスト
- [ ] パフォーマンステストの作成
- [ ] 実機での動作確認
- [ ] テストが全て通る
- [ ] ドキュメント更新完了

## 実装方針
1. RealityKitのARViewセットアップ
   - SwiftUIでのRealityKitView実装（ARViewではなくRealityView）
   - カメラ映像の背景処理（リアルタイムフィルター）
   - シーンの基本構成
2. 3Dエンティティの生成
   - ModelEntityで球体（半径5mm）と円柱を作成
   - シンプルなマテリアル（白色、少し透明度）
   - 基本的なライティング設定
3. 座標変換とスケーリング
   - MediaPipe座標系（0-1正規化）からRealityKit座標系へ
   - 手のサイズを画面に収まるよう調整
   - z座標（深度）の適切なマッピング
4. リアルタイム更新
   - エンティティプールによる効率化
   - 毎フレームの位置更新処理
   - メモリリークの防止（weak参照）

## 段階的実装の位置づけ
- **Phase 1（本タスク）**: 球体と円柱による簡易表現
- **Phase 2（将来）**: 簡易的なメッシュモデル
- **Phase 3（将来）**: リアルなスキンメッシュ

## 関連情報
- 前提タスク: #004（MediaPipe統合）
- RealityKit公式ドキュメント
- 機能要件仕様書: 4.2.2 3Dモデルの生成、7.1 リアルな3Dモデル実装

## 作業ログ
### YYYY-MM-DD HH:MM
- 作業内容の記録
- 発生した問題と解決方法
- 次回の作業予定