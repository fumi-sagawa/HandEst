# タスク名: MediaPipe Handsの統合と基本的な手認識

## 概要
MediaPipe Handsフレームワークを統合し、カメラ映像から手の21個の関節点をリアルタイムで検出する機能を実装する。iOS環境での制限を考慮した実装を行う。

## 背景・目的
- 手の3Dモデル化のための関節点データ取得
- リアルタイム（30fps以上）での手認識実現
- 左右の手の判別機能の実装

## 優先度
**High** - アプリのコア機能である手認識の実装

## 前提条件
- #003（カメラアクセス）が完了していること

## To-Be（完了条件）
- [ ] MediaPipe iOS frameworkの統合検証
- [ ] バイナリサイズへの影響確認（50-100MB想定）
- [ ] MediaPipeClientの依存関係実装
- [ ] HandTrackingFeatureの実装
- [ ] 21個の関節点データの取得と変換
- [ ] 左右の手の判別機能実装（信頼度閾値0.8以上）
- [ ] 認識精度と速度の検証（30fps維持）
- [ ] フォールバック処理の実装
- [ ] MediaPipe初期化エラーの処理
- [ ] 認識失敗時のエラーハンドリング（Logger使用）
- [ ] 低照度環境の検出と警告実装
- [ ] HandTrackingFeatureの単体テスト
- [ ] エラーケースのテスト作成
- [ ] 実機での動作確認（手の認識、FPS測定）
- [ ] テストが全て通る
- [ ] ドキュメント更新完了

## 実装方針
1. MediaPipeのiOSフレームワーク導入
   - CocoaPodsまたは手動での統合（SPM非対応の場合）
   - ライセンス表記の追加（Apache License 2.0）
   - App Storeサイズ制限への対応検討
2. MediaPipeClient実装
   - HandLandmarkerの初期化（delegate_queue設定）
   - フレーム処理とコールバック
   - 3D座標データの取得（x,y,z）
   - エラーハンドリング
3. データモデルの定義
   - HandPose: 21関節点の座標と信頼度
   - HandLandmark: 各関節の詳細情報
   - HandednessData: 左右判別（閾値0.8）
4. パフォーマンス最適化
   - 処理キューの管理（別スレッド）
   - メモリ使用量の監視
   - 認識頻度の調整（必要に応じて）

## リスクと対策
- **iOS環境での安定性**: 定期的なライブラリ更新への対応
- **バイナリサイズ**: On-Demand Resourcesの検討
- **認識精度**: 低照度環境での警告表示

## 関連情報
- 前提タスク: #003（カメラアクセス）
- MediaPipe公式ドキュメント: https://developers.google.com/mediapipe
- 機能要件仕様書: 3.1 手のポーズデータ、7.2 MediaPipe実装における注意事項

## 作業ログ
### YYYY-MM-DD HH:MM
- 作業内容の記録
- 発生した問題と解決方法
- 次回の作業予定