# タスク名: パフォーマンス最適化とバッテリー管理

## 概要
アプリのパフォーマンスを最適化し、バッテリー消費を抑える仕組みを実装する。MVPとして必要最小限の最適化に集中。

## 背景・目的
- 30fps以上の安定したフレームレート維持
- バッテリー消費の最小化
- 発熱によるサーマルスロットリング回避

## 優先度
**Medium** - リリース前に必要な最適化

## 前提条件
- 全主要機能が実装完了していること
- 実機でのテストが可能であること

## To-Be（完了条件）
- [ ] パフォーマンスプロファイリングの実施
- [ ] メモリリークの検出と修正
- [ ] 基本的なGPU/CPU使用率の確認
- [ ] バックグラウンド時の処理停止
- [ ] ポーズロック時の最適化
- [ ] 基本的なパフォーマンステスト
- [ ] 実機での15分間動作テスト
- [ ] 30fps維持の確認
- [ ] テストが全て通る
- [ ] ドキュメント更新完了

## 実装方針
1. プロファイリング（重点項目）
   - Instrumentsでのメモリリーク検出
   - Time Profilerでのボトルネック特定
   - 30fps維持の確認
2. 必須最適化
   - メモリリークの修正
   - バックグラウンド時のカメラ停止
   - ポーズロック時のMediaPipe停止
   - 不要なレンダリング処理の削減
3. 電力管理（基本実装）
   - バックグラウンド移行時の自動停止
   - フォアグラウンド復帰時の自動再開
   - ポーズロック中の省電力化
4. 発熱対策（簡易版）
   - 15分使用での温度上昇確認
   - 必要に応じてフレームレート調整

## スコープ外（将来対応）
- 発熱警告システム
- 省電力モード切り替え
- フレームレート制限オプション
- 詳細なバッテリー消費分析

## テスト基準
- 15分連続使用で安定動作
- メモリ使用量が200MB以下
- CPU使用率が平均60%以下
- 顕著な発熱がないこと

## 関連情報
- 前提タスク: 主要機能の実装完了
- 機能要件仕様書: 7.4 パフォーマンスとバッテリー
- Instruments使用ガイド

## 作業ログ
### YYYY-MM-DD HH:MM
- 作業内容の記録
- 発生した問題と解決方法
- 次回の作業予定