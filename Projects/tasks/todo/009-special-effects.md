# タスク名: 特殊効果（魚眼・平行投影）の実装

## 概要
通常のカメラでは実現できない特殊な投影方式として、魚眼効果（F.E.）と平行投影（P.P.）を実装する。

## 背景・目的
- より多様な表現方法の提供
- 魚眼効果による広範囲の表示
- 平行投影による正確な形状把握

## 優先度
**Low** - MVP後の追加機能として実装

## 前提条件
- #008（焦点距離変更）が完了していること

## To-Be（完了条件）
- [ ] 魚眼効果（F.E.）の実装
- [ ] 平行投影（P.P.）の実装
- [ ] 効果選択UIの実装
- [ ] 効果の視覚的な実装（段階的アプローチ）
- [ ] 効果のオン/オフ切り替え
- [ ] パフォーマンスへの影響測定（30fps維持）
- [ ] 視覚効果のテスト
- [ ] 実機での動作確認
- [ ] テストが全て通る
- [ ] ドキュメント更新完了

## 実装方針
1. 魚眼効果（F.E.）- 段階的実装
   - Phase 1: RealityKitの標準機能で疑似魚眼効果
     - 超広角FOV（120°程度）の設定
     - 画面端の自然な歪みを活用
   - Phase 2: カスタムシェーダー（必要に応じて）
     - Metalシェーダーでバレル歪み
     - パフォーマンスが問題になる場合のみ
2. 平行投影（P.P.）
   - RealityKitのOrthographicProjectionを使用
   - 奥行きによるサイズ変化の無効化
   - 適切なビューボリュームの設定
3. UI統合
   - 焦点距離ボタンと同列に配置
   - F.E.とP.P.のトグルボタン
   - 選択時はオレンジ色でハイライト
4. 最適化
   - 効果OFF時は通常の透視投影
   - 切り替え時のスムーズな遷移

## リスク管理
- **Metalシェーダーの複雑性**: まずは標準機能で実装
- **パフォーマンス影響**: 30fps維持を優先
- **実装優先度**: MVP完成後に着手

## 関連情報
- 前提タスク: #008（焦点距離変更）
- 機能要件仕様書: 4.5.1 焦点距離による見え方
- RealityKit Projection仕様

## 作業ログ
### YYYY-MM-DD HH:MM
- 作業内容の記録
- 発生した問題と解決方法
- 次回の作業予定